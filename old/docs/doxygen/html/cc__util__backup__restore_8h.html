<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DA16200 SDK: cc_util_backup_restore.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DA16200 SDK
   &#160;<span id="projectnumber">3.1.0</span>
   </div>
   <div id="projectbrief">Ultra-low power Wi-Fi SoC</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_4270bfced15e0e73154b13468c7c9ad9.html">core</a></li><li class="navelem"><a class="el" href="dir_ddeab0661943ca2a344224c1b2445b85.html">system</a></li><li class="navelem"><a class="el" href="dir_f174d6fae4e7f56ff8cc49434bec835f.html">include</a></li><li class="navelem"><a class="el" href="dir_19856d13d7eeacf102662a81299c9c23.html">crypto</a></li><li class="navelem"><a class="el" href="dir_c2b272b3daff5b986c2c0fc845762f68.html">shared</a></li><li class="navelem"><a class="el" href="dir_b2017a40e8b691f5fc8af1498b23ae3e.html">include</a></li><li class="navelem"><a class="el" href="dir_a9ad224adc02e998b1dd8f6fddbc5300.html">cc_util</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">cc_util_backup_restore.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file contains CryptoCell Util backup and restore functions and definitions.  
<a href="#details">More...</a></p>

<p><a href="cc__util__backup__restore_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a9caea2af028413df9a806d35ffd987d5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cc__util__backup__restore_8h.html#a9caea2af028413df9a806d35ffd987d5">CC_UTIL_RAM_BACKUP</a>(srcAddr,  dstAddr,  blockSize)&#160;&#160;&#160;<a class="el" href="cc__util__backup__restore_8h.html#abf644dc2e0ea262ddc4d72d416f3ee47">CC_UtilBackupAndRestore</a>(srcAddr, dstAddr, blockSize, <a class="el" href="group__cc__pal__types.html#gga7323bc031012d4ecc054f5ac4b9a1e76a286c1b1735c565b56145da9bd3e1f9fe">CC_TRUE</a>)</td></tr>
<tr class="memdesc:a9caea2af028413df9a806d35ffd987d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">This macro is used for power management. Use it upon entry to system-on-chip suspended state, to perform secure backup of on-chip secure RAM to an off-chip DRAM. This backed-up data is encrypted and signed with the session key. The backup must be coupled with a matching restore operation upon wakeup from suspended state. Restoring must be done to the exact same address that was backed up, with the exact same size that was backed up.  <a href="cc__util__backup__restore_8h.html#a9caea2af028413df9a806d35ffd987d5">More...</a><br /></td></tr>
<tr class="separator:a9caea2af028413df9a806d35ffd987d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1ad021208d54029d19852857ba8949d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cc__util__backup__restore_8h.html#ae1ad021208d54029d19852857ba8949d">CC_UTIL_RAM_RESTORE</a>(srcAddr,  dstAddr,  blockSize)&#160;&#160;&#160;<a class="el" href="cc__util__backup__restore_8h.html#abf644dc2e0ea262ddc4d72d416f3ee47">CC_UtilBackupAndRestore</a>(srcAddr, dstAddr, blockSize, <a class="el" href="group__cc__pal__types.html#gga7323bc031012d4ecc054f5ac4b9a1e76a6f15eba2bf45deaeaf625e9cad6492fa">CC_FALSE</a>)</td></tr>
<tr class="memdesc:ae1ad021208d54029d19852857ba8949d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This macro is used for power management. Use it upon wakeup from suspended state, to restore the data that was backed up upon entry to suspended state. The source buffer is decrypted and verified with the session key. The restore operation must match a previous backup operation. Restoring must be done to the exact same address and with the exact same size that was previously backed up.  <a href="cc__util__backup__restore_8h.html#ae1ad021208d54029d19852857ba8949d">More...</a><br /></td></tr>
<tr class="separator:ae1ad021208d54029d19852857ba8949d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abf644dc2e0ea262ddc4d72d416f3ee47"><td class="memItemLeft" align="right" valign="top"><a class="el" href="no__os_2cc__pal__types__plat_8h.html#a0524980129b7e5ec9d0998ddab83dd1a">CCError_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cc__util__backup__restore_8h.html#abf644dc2e0ea262ddc4d72d416f3ee47">CC_UtilBackupAndRestore</a> (uint8_t *pSrcBuff, uint8_t *pDstBuff, size_t blockSize, <a class="el" href="no__os_2cc__pal__types__plat_8h.html#a6dcfa1fccae81f1dcfefe3229df69b6c">CCBool_t</a> isSramBackup)</td></tr>
<tr class="memdesc:abf644dc2e0ea262ddc4d72d416f3ee47"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function performs backup or restore of memory buffer, according to the flag it is given. It should not be called directly, but only through the CC_UTIL_RAM_BACKUP and CC_UTIL_RAM_RESTORE macros.  <a href="cc__util__backup__restore_8h.html#abf644dc2e0ea262ddc4d72d416f3ee47">More...</a><br /></td></tr>
<tr class="separator:abf644dc2e0ea262ddc4d72d416f3ee47"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains CryptoCell Util backup and restore functions and definitions. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a9caea2af028413df9a806d35ffd987d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9caea2af028413df9a806d35ffd987d5">&#9670;&nbsp;</a></span>CC_UTIL_RAM_BACKUP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CC_UTIL_RAM_BACKUP</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">srcAddr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">dstAddr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">blockSize&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="cc__util__backup__restore_8h.html#abf644dc2e0ea262ddc4d72d416f3ee47">CC_UtilBackupAndRestore</a>(srcAddr, dstAddr, blockSize, <a class="el" href="group__cc__pal__types.html#gga7323bc031012d4ecc054f5ac4b9a1e76a286c1b1735c565b56145da9bd3e1f9fe">CC_TRUE</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This macro is used for power management. Use it upon entry to system-on-chip suspended state, to perform secure backup of on-chip secure RAM to an off-chip DRAM. This backed-up data is encrypted and signed with the session key. The backup must be coupled with a matching restore operation upon wakeup from suspended state. Restoring must be done to the exact same address that was backed up, with the exact same size that was backed up. </p>
<dl class="section note"><dt>Note</dt><dd>The session key must be initialized prior to using this API.</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<dl class="section note"><dt>Note</dt><dd>The backup destination buffer should be 16 bytes bigger than the source buffer, in order to accommodate the signature.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>CC_OK On success. </dd>
<dd>
A non-zero value from cc_util_error.h on failure. </dd></dl>

</div>
</div>
<a id="ae1ad021208d54029d19852857ba8949d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1ad021208d54029d19852857ba8949d">&#9670;&nbsp;</a></span>CC_UTIL_RAM_RESTORE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CC_UTIL_RAM_RESTORE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">srcAddr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">dstAddr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">blockSize&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="cc__util__backup__restore_8h.html#abf644dc2e0ea262ddc4d72d416f3ee47">CC_UtilBackupAndRestore</a>(srcAddr, dstAddr, blockSize, <a class="el" href="group__cc__pal__types.html#gga7323bc031012d4ecc054f5ac4b9a1e76a6f15eba2bf45deaeaf625e9cad6492fa">CC_FALSE</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This macro is used for power management. Use it upon wakeup from suspended state, to restore the data that was backed up upon entry to suspended state. The source buffer is decrypted and verified with the session key. The restore operation must match a previous backup operation. Restoring must be done to the exact same address and with the exact same size that was previously backed up. </p>
<dl class="section note"><dt>Note</dt><dd>The session key cannot be replaced between matching backup and restore operations. </dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<dl class="section note"><dt>Note</dt><dd>In case FIPS certification support is set to ON, this function is also responsible to deliver the TEE FIPS status to the REE (after waking up from suspended state).</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>CC_OK On success. </dd>
<dd>
A non-zero value from cc_util_error.h on failure. </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="abf644dc2e0ea262ddc4d72d416f3ee47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf644dc2e0ea262ddc4d72d416f3ee47">&#9670;&nbsp;</a></span>CC_UtilBackupAndRestore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="no__os_2cc__pal__types__plat_8h.html#a0524980129b7e5ec9d0998ddab83dd1a">CCError_t</a> CC_UtilBackupAndRestore </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pSrcBuff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pDstBuff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>blockSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="no__os_2cc__pal__types__plat_8h.html#a6dcfa1fccae81f1dcfefe3229df69b6c">CCBool_t</a>&#160;</td>
          <td class="paramname"><em>isSramBackup</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function performs backup or restore of memory buffer, according to the flag it is given. It should not be called directly, but only through the CC_UTIL_RAM_BACKUP and CC_UTIL_RAM_RESTORE macros. </p>
<dl class="section return"><dt>Returns</dt><dd>CC_OK On success. </dd>
<dd>
A non-zero value from cc_util_error.h on failure. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pSrcBuff</td><td>Host memory buffer to backup/restore from. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pDstBuff</td><td>Host memory buffer for encrypted/decrypted data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">blockSize</td><td>The size of the data to backup/restore (signature size not included). Must be &lt; 64KB. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">isSramBackup</td><td>The operation type: <ul>
<li>
CC_TRUE: backup. <ul>
<li>
</li>
</ul>
restore.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
